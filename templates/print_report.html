<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Expense Report</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap for screen and print -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(107deg,#ecf2fa 60%,#e0e7fa 100%);
            min-height: 100vh;
        }
        .print-container {
            max-width: 1050px; margin: 32px auto 0 auto;
            background: #fff; border-radius: 18px;
            box-shadow: 0 2px 15px #1565c026;
            padding: 20px 34px 34px 34px;
        }
        .print-title { color: #1565c0; font-weight: bold; font-size:2.22rem; }
        .print-btn { margin-bottom: 22px; }
        .fade-in { animation: fadeInNew 0.7s; }
        @keyframes fadeInNew { from { opacity:0; transform:translateY(35px);} to { opacity:1; transform:translateY(0);} }
        @media print {
            body { background: #fff !important; color: #222 !important; }
            .no-print { display: none !important; }
            .print-container { box-shadow:none;border-radius:0;padding:0 12px;width:100%;}
        }
        th, td { font-size: 1.09rem; }
        .table { border-radius: 15px; overflow:hidden; }
        tr { page-break-inside: avoid; }
        .badge { font-size:.99em;}
    </style>
</head>
<body>
    <div class="print-container fade-in">
        <div class="d-flex justify-content-between align-items-center my-2 mb-3">
            <span class="print-title">Expense Report</span>
            <button onclick="window.print()" class="btn btn-primary print-btn no-print">Print</button>
        </div>
        <div class="mb-2"><b>Total:</b> ₹{{ total }}</div>
        <table class="table table-bordered table-sm mb-4 mt-2">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Category</th>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Tags</th>
                </tr>
            </thead>
            <tbody>
            {% for expense in expenses %}
                <tr>
                    <td>{{ expense.date.strftime('%Y-%m-%d') }}</td>
                    <td>
                        {% set cat = categories|selectattr("id","equalto",expense.category_id)|first %}
                        <span>{{ cat.icon }}</span> {{ cat.name }}
                    </td>
                    <td>{{ expense.description }}</td>
                    <td>₹{{ expense.amount }}</td>
                    <td>
                      {% if expense.tags %}
                        {% for tag in expense.tags.split(",") %}
                          <span class="badge rounded-pill bg-primary">{{ tag }}</span>
                        {% endfor %}
                      {% endif %}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <div>Printed on <b>{{ (now().strftime('%Y-%m-%d %H:%M')) if now else '' }}</b></div>
    </div>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Expense Report</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Bootstrap for screen and print -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(107deg,#ecf2fa 60%,#e0e7fa 100%);
            min-height: 100vh;
        }
        .print-container {
            max-width: 1050px; margin: 32px auto 0 auto;
            background: #fff; border-radius: 18px;
            box-shadow: 0 2px 15px #1565c026;
            padding: 20px 34px 34px 34px;
        }
        .print-title { color: #1565c0; font-weight: bold; font-size:2.22rem; }
        .print-btn { margin-bottom: 22px; }
        .fade-in { animation: fadeInNew 0.7s; }
        @keyframes fadeInNew { from { opacity:0; transform:translateY(35px);} to { opacity:1; transform:translateY(0);} }
        @media print {
            body { background: #fff !important; color: #222 !important; }
            .no-print { display: none !important; }
            .print-container { box-shadow:none;border-radius:0;padding:0 12px;width:100%;}
        }
        th, td { font-size: 1.09rem; }
        .table { border-radius: 15px; overflow:hidden; }
        tr { page-break-inside: avoid; }
        .badge { font-size:.99em;}
    </style>
</head>
<body>
    <div class="print-container fade-in">
        <div class="d-flex justify-content-between align-items-center my-2 mb-3">
            <span class="print-title">Expense Report</span>
            <button onclick="window.print()" class="btn btn-primary print-btn no-print">Print</button>
        </div>
        <div class="mb-2"><b>Total:</b> ₹{{ total }}</div>
        <table class="table table-bordered table-sm mb-4 mt-2">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Category</th>
                    <th>Description</th>
                    <th>Amount</th>
                    <th>Tags</th>
                </tr>
            </thead>
            <tbody>
            {% for expense in expenses %}
                <tr>
                    <td>{{ expense.date.strftime('%Y-%m-%d') }}</td>
                    <td>
                        {% set cat = categories|selectattr("id","equalto",expense.category_id)|first %}
                        <span>{{ cat.icon }}</span> {{ cat.name }}
                    </td>
                    <td>{{ expense.description }}</td>
                    <td>₹{{ expense.amount }}</td>
                    <td>
                      {% if expense.tags %}
                        {% for tag in expense.tags.split(",") %}
                          <span class="badge rounded-pill bg-primary">{{ tag }}</span>
                        {% endfor %}
                      {% endif %}
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <div>Printed on <b>{{ (now().strftime('%Y-%m-%d %H:%M')) if now else '' }}</b></div>
    </div>
</body>
</html>
